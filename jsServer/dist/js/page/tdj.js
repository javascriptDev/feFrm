define(function(require){function t(){var t=document.querySelector(".btn_box");t.setAttribute("biz-itemid",k.product.item.numIid),t.setAttribute("href",k.product.item.itemUrl),t.setAttribute("data-type",0),t.setAttribute("isconvert",1);var n=document.createElement("script"),o=document.getElementsByTagName("head")[0];window.alimamatk_show||(n.charset="gbk",n.async=!0,n.src="http://a.alimama.cn/tkapi.js",o.insertBefore(n,o.firstChild));var a={pid:"mm_32502158_3327973_32878433",appkey:"21155698",unid:y,type:"click"};window.alimamatk_onload=window.alimamatk_onload||[],window.alimamatk_onload.push(a)}var n=require("js/lib/template"),o=require("js/component/util"),a=require("js/component/share"),s=require("js/tools/statistics"),c=require("js/component/carousel"),l=require("js/component/page"),d=o.urlParse(location.search);if(d.productId){var p=a.tdjApi(d.productId),h=o.getChannelType(),f=d.shareId||"",m=encodeURIComponent(location.href),g=d.term||"",v=o.Guid(),x=d.u||"",y=d.unid,w={shareId:f,shareChannel:h,productId:d.productId,businessId:"",url:"",unid:v},b={shareChannel:h,shareId:f,url:m,unid:v},A=$(".main");x=d.u||"",y=d.unid,notStatistics=d.notStatistics,!notStatistics&&s.browse(b);var I=n.compile(detail_tpl),k={},S="",T=o.isWeixin(),C=$(".main");T&&(notStatistics||(location.href=location.href+"&notStatistics=true"),o.isIos()?S="/images/ios.png":o.isAndroid()&&(S="/images/android.png"),A.before('<img class="plant-mask" src="'+S+'" style="width:100%;position:absolute;z-index:999;top:0;display:none;"/>')),$.get(p,function(n){n=JSON.parse(n),n=n&&n.data&&n.data||{},w.url=encodeURIComponent(n.product.item.itemUrl),w.businessId=n.businessId||"",k=n,A.html(I({de:n,text:function(t){return 1==t?"天猫":"淘宝"},fixed:function(t){return parseFloat(t).toFixed(2)}})),A.show(),C.delegate("[data-click]","click",function(e){if(e.preventDefault(),T)$(".plant-mask").show();else{var t=$(this).attr("href"),n="http://union.egou.com/to?site=20&shop=719111&fuid="+x+"&chn="+h+"&term="+g+"&uniq="+y+"&url="+encodeURIComponent(t+"&unid=%user%&page="+l.tdj);s.click(w,function(){location.href=n})}}),document.title=n.productDetail.title;var o=$(".banner .inner"),a=o.children()[0].offsetWidth;$(".banner").css("height",document.documentElement.clientWidth+"px"),new c({target:o[0],count:n.product.item.smallImages.length,itemWidth:a,indicator:document.querySelector("#position"),notRun:1}),t()})}}),!function(){function t(t){return t.replace(y,"").replace(u,",").replace($,"").replace(w,"").replace(b,"").split(A)}function n(t){return"'"+t.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function o(o,a){function e(t){return f+=t.split(/\n/).length-1,p&&(t=t.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),t&&(t=x[1]+n(t)+x[2]+"\n"),t}function s(n){var o=f;if(d?n=d(n,a):c&&(n=n.replace(/\n/g,function(){return f++,"$line="+f+";"})),0===n.indexOf("=")){var e=h&&!/^=[=#]/.test(n);if(n=n.replace(/^=[=#]?|[\s;]*$/g,""),e){var s=n.replace(/\s*\([^\)]+\)/,"");m[s]||/^(include|print)$/.test(s)||(n="$escape("+n+")")}else n="$string("+n+")";n=x[1]+n+x[2]}return c&&(n="$line="+o+";"+n),r(t(n),function(t){if(t&&!v[t]){var n;n="print"===t?u:"include"===t?$:m[t]?"$utils."+t:g[t]?"$helpers."+t:"$data."+t,w+=t+"="+n+",",v[t]=!0}}),n+"\n"}var c=a.debug,l=a.openTag,i=a.closeTag,d=a.parser,p=a.compress,h=a.escape,f=1,v={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,x=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],y=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+y+"}",$="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+y+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(c?"$line=0,":""),b=x[0],A="return new String("+x[3]+");";r(o.split(l),function(t){t=t.split(i);var n=t[0],o=t[1];1===t.length?b+=e(n):(b+=s(n),o&&(b+=e(o)))});var I=w+b+A;c&&(I="try{"+I+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+n(o)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var k=new Function("$data","$filename",I);return k.prototype=m,k}catch(S){throw S.temp="function anonymous($data,$filename) {"+I+"}",S}}var a=function(t,n){return"string"==typeof n?q(n,{filename:t}):c(t,n)};a.version="3.0.0",a.config=function(t,n){e[t]=n};var e=a.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},s=a.cache={};a.render=function(t,n){return q(t,n)};var c=a.renderFile=function(t,n){var o=a.get(t)||v({filename:t,name:"Render Error",message:"Template not found"});return n?o(n):o};a.get=function(t){var n;if(s[t])n=s[t];else if("object"==typeof document){var o=document.getElementById(t);if(o){var a=(o.value||o.innerHTML).replace(/^\s*|\s*$/g,"");n=q(a,{filename:t})}}return n};var l=function(t,n){return"string"!=typeof t&&(n=typeof t,"number"===n?t+="":t="function"===n?l(t.call(t)):""),t},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},d=function(t){return i[t]},p=function(t){return l(t).replace(/&(?![\w#]+;)|[<>"']/g,d)},h=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},f=function(t,n){var o,a;if(h(t))for(o=0,a=t.length;a>o;o++)n.call(t,t[o],o,t);else for(o in t)n.call(t,t[o],o)},m=a.utils={$helpers:{},$include:c,$string:l,$escape:p,$each:f};a.helper=function(t,n){g[t]=n};var g=a.helpers=m.$helpers;a.onerror=function(t){var n="Template Error\n\n";for(var o in t)n+="<"+o+">\n"+t[o]+"\n\n";"object"==typeof console&&console.error(n)};var v=function(t){return a.onerror(t),function(){return"{Template Error}"}},q=a.compile=function(t,n){function a(o){try{return new i(o,l)+""}catch(a){return n.debug?v(a)():(n.debug=!0,q(t,n)(o))}}n=n||{};for(var c in e)void 0===n[c]&&(n[c]=e[c]);var l=n.filename;try{var i=o(t,n)}catch(d){return d.filename=l||"anonymous",d.name="Syntax Error",v(d)}return a.prototype=i.prototype,a.toString=function(){return i.toString()},l&&n.cache&&(s[l]=a),a},r=m.$each,x="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",y=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,u=/[^\w$]+/g,$=new RegExp(["\\b"+x.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,b=/^,+|,+$/g,A=/^$|,+/;"function"==typeof define?define("js/lib/template",function(require,t,n){n.exports=a}):"undefined"!=typeof exports?module.exports=a:this.template=a}(),define("js/component/util",function(require,t,n){function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=16*Math.random()|0,n="x"==t?r:3&r|8;return n.toString(16)})}function a(){var t=document.documentElement.clientWidth,n=document.createElement("style");n.innerHTML=".rtop{background-size:100% 100% !important;}.list_top .list_left{height:"+.36*t+"px;max-height:"+.36*t+"px;overflow:hidden;}",document.getElementsByTagName("head")[0].appendChild(n)}function s(){var t=new Date;return[t.getFullYear(),"-",t.getMonth()+1,"-",t.getDate()," ",t.getHours(),":",t.getMinutes(),":",t.getSeconds()].map(function(t){return"number"==typeof t&&10>t?"0"+t:t})}function c(){var t=new Date;return[t.getFullYear(),t.getMonth()+1,t.getDate()]}function l(t){return t.replace(/(^\s*)|(\s*$)/g,"").replace(/[\r\n]/g,"")}function d(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function p(){var u=navigator.userAgent;return u.indexOf("Android")>-1||u.indexOf("Linux")>-1}function h(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)?!0:!1}function f(t){return"string"!=typeof t?{}:(t=$.trim(t).replace(/^(\?|#|&)/,""),t?t.split("&").reduce(function(t,n){var o=n.replace(/\+/g," ").split("="),a=o[0],s=o[1];return a=decodeURIComponent(a),s=void 0===s?null:decodeURIComponent(s),t.hasOwnProperty(a)?Array.isArray(t[a])?t[a].push(s):t[a]=[t[a],s]:t[a]=s,t},{}):{})}function m(){var t=window.navigator.userAgent.toLowerCase(),n="8";return"micromessenger"==t.match(/MicroMessenger/i)?n="4":"qqbrowser"==t.match(/QQBrowser/i)||"mqqbrowser"==t.match(/MQQBrowser/i)||"qq"==t.match(/QQ/i)?n="5":"weibo"==t.match(/Weibo/i)?n="2":"alipay"==t.match(/Alipay/i)&&(n="7"),n}n.exports={urlParse:f,getChannelType:m,isWeixin:h,isIos:d,isAndroid:p,delSpace:l,getDate:c,Guid:o,getTime:s,injectCss:a}}),define("js/component/share",function(require,t,n){var o="http://172.16.40.215:8080",a="/ol.html",s="/result.html",c="/search.html",l="/pl.html",d="/shareRecord.html",p="/queqiao/account/getOrderList",h="/queqiao/account/getUserAccountInfo",f="/queqiao/performance/getSummaryInfo",m=o+"/queqiao/log/saveClickLog",g=o+"/queqiao/log/saveBrowseLog",v=o+"/queqiao/collectionShare/clickCollectionShareUrl",x="/product/getProductInfoQQiaoShare",y="/tdj/getTaodianjinInfo",$="/queqiao/order/getNewOrderNum",w="/product/getQQiaoSolrProductList",b=o+"/product/getTopCategoryList?test=true",A=o+"/product/getQueQiaoProductList?test=true&pageNum=1&pageSize=20",I=o+"/product/getQueQiaoProductList",k=o+"/product/getQueQiaoCarouselList?test=true",S=o+"/product/getQueQiaoCategoryHot?test=true&type=2",T=o+"/product/getQueQiaoCategoryHot?test=true&type=1",C=o+"/topic/getTopicInfoQueQiaoShare",j=o+"/topic/getTopicInfoQueQiao",Q=o+"/queqiao/share/getShareList",L=o+"/queqiao/performance/getPerformanceList";n.exports={server:o,resultUrl:s,searchUrl:c,prPage:l,srPage:d,sc:v,searchCategoryApi:b,recommendApi:A,mainApi:I,carsouselApi:k,hotSearchWord:S,hotCategory:T,appActivityAPI:j,activityApi:C,clickApi:m,browseApi:g,olUrl:function(t){return a+(t||"")},searchResultApi:function(){return o+w},olApi:function(t){return o+p+(t||"")+"&test=true"},balanceApi:function(t){return o+h+"?userId="+t+"&test=true"},yjApi:function(t,n,a){return o+f+"?beginTime="+(t||"")+"&endTime="+(n||"")+"&userId="+(a||"")+"&test=true"},pdApi:function(t){return o+x+"?productId="+t+"&test=true"},tdjApi:function(t){return o+y+"?NumIids="+t+"&test=true"},newOlApi:function(t,n){return o+$+"?userId="+t+"&lastTime="+n+"&test=true"},shareRecordApi:function(t){return Q+"?test=true&userId="+t},plApi:function(t){return L+"?test=true&userId="+t}}}),define("js/tools/statistics",function(require,t,n){function o(t,n){var o="?test=true&";for(var i in t)o+=i+"="+t[i]+"&";var a=s.clickApi;$.get(a+o,function(t){t=JSON.parse(t),n&&n()}),setTimeout(function(){n&&n()},5e3)}function a(t){var n="?test=true&";for(var i in t)n+=i+"="+t[i]+"&";var o=s.browseApi,a=new Image;a.src=o+n,console.log(o+n)}var s=require("js/component/share");n.exports={click:o,browse:a}}),define("js/component/carousel",function(require,t,n){function o(t){this.lock=0,this.index=0,this.itemWidth=t.itemWidth||document.documentElement.clientWidth,this.limit=.3*this.itemWidth,this.target=t.target,this.max=t.count-1,this.timeout=t.timeout,this.indicator=t.indicator,this.timeHandler=void 0,this.basePosition=0,this.end=t.end,this.notRun=t.notRun,this.els=this.target.querySelectorAll("[data-carousel]"),this.init()}n.exports=o,o.prototype={init:function(){this.target.style.width=100*(this.max+1)+"%",$(this.target).find("[data-carousel]").css("width",100/(this.max+1)+"%"),!this.notRun&&this.run(),this.addEvent(),this.set3D(),this.fixPos()},set3D:function(t){var n=this.target;["webkitTransition","transition"].forEach(function(o){n.style[o]="left "+(t?0:.3)+"s"})},addEvent:function(){var t=this.target,n=this,o=0,a=0;t.addEventListener("touchstart",function(e){if(!n.lock){var t=e.touches[0];o=t.clientX,a=t.clientY,n.basePosition=parseInt(n.target.style.left),clearInterval(n.timeHandler),n.set3D(1)}}),t.addEventListener("touchmove",function(e){if(!n.lock){var t=e.touches[0],s=t.clientX,c=t.clientY,l=Math.abs(s-o),d=Math.abs(c-a);if(Math.atan(l/d)/Math.PI*360>45){window.lock=1,!n.isCarouselMove&&(n.isCarouselMove=1),e.preventDefault();var p=s-o;p>0?n.right(p):n.left(p)}else n.isCarouselMove&&e.preventDefault()}}),t.addEventListener("touchend",function(e){window.lock=0,n.set3D(),n.reset(),n.lock=0,n.end&&n.end(),!n.notRun&&n.run()})},run:function(){var t=this;this.timeHandler=setInterval(function(){t.index++,t.reset(),t.set3D(),t.fixPos()},this.timeout)},go:function(t){this.target.style.left=this.basePosition+t+"px"},move:function(t,n){Math.abs(t)>=this.limit?(this.lock=1,"left"==n?this.index++:this.index--,this.set3D(),this.reset(),this.fixPos()):this.go(t)},left:function(t){this.move(t,"left")},right:function(t){this.move(t,"right")},fixPos:function(){var t=this.index,n=this.max+1,o=(t%n-1)%n,a=(t%n+1)%n;0>o&&(o+=n),0>a&&(a+=n),t==this.max?a=0:0==t&&(o=this.max),this.els[o].style.transform="translateX("+((this.index-1)*this.itemWidth-this.els[o].offsetLeft)+"px)",this.els[o].style.webkitTransform="translateX("+((this.index-1)*this.itemWidth-this.els[o].offsetLeft)+"px)",this.els[a].style.webkitTransform="translateX("+((this.index+1)*this.itemWidth-this.els[a].offsetLeft)+"px)",this.els[a].style.transform="translateX("+((this.index+1)*this.itemWidth-this.els[a].offsetLeft)+"px)"},reset:function(){this.target.style.left=-this.index*this.itemWidth+"px",$(".cur").removeClass("cur");var t=this.index%(this.max+1);0>t&&(t+=this.max+1),this.indicator.children[t].className+=" cur",this.isCarouselMove=0}}}),define("js/component/page",function(require,t,n){n.exports={main:1,search:2,sysTopic:3,businessTopic:4,businessDetail:5,otherApp:6,single:7,tdj:8,sysTopicShare:9,businessTopicShare:10,other:11}});