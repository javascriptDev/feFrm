define(function(require,t,o){function n(t){var o=$(".active").parent(),n=o.attr("data-type"),a=p.getDate(),s=getEt(a,"yd"==n?-1:"7d"==n?-7:-30).join("-");et=getEt(a,-1).join("-"),$olBtn.attr("data-ts","bt="+s+"&et="+et),$.get(w.balanceApi(t),function(t){t=JSON.parse(t);var o=t.data&&t.data.accountInfo||{};$AvailableBalance.text("￥"+parseFloat(o.confirmFeedBackAmt||0).toFixed(2)),$expectFeedBackAmt.text("￥"+parseFloat(o.expectFeedBackAmt||0).toFixed(2))}),c(s,et,t),g(w.newOlApi(t,localStorage.getItem("lastDate")||p.getTime().join("")))}function a(t,o){var n=t.find("span");if(!n.hasClass("active")){$(".active").removeClass("active"),n.addClass("active");var a=p.getDate();bt=getEt(a,o).join("-"),et=getEt(a,-1).join("-");var d="";d=-1==o?"yd":-7==o?"7d":"30d",x[d]?(s(x[d]),$olBtn.attr("data-ts","bt="+bt+"&et="+et)):c(bt,et,f,function(){$olBtn.attr("data-ts","bt="+bt+"&et="+et)})}}function c(t,o,n,a){$.get(w.yjApi(t,o,n),function(n){n=JSON.parse(n);var c=n&&n.data&&n.data.performance||{};d(t,o,c),s(c),a&&a(),$mask.hide()})}function s(t){$("[data-val]").each(function(o,n){$(this).text(t[$(this).attr("data-val")]||0)})}function d(t,o,n){var a=new Date(o).getTime()-new Date(t).getTime(),c="";c=0==a?"yd":5472e5==a?"7d":"30d",x[c]=n}function l(){h.shipWallet()}function g(t){$.get(t,function(t){t=JSON.parse(t);var o=t&&t.data&&t.data.num||0;0!=o?(h.showWarn(),$msgAlert.html("+"+o+"订单").show()):($msgAlert.hide(),h.hideWarn())})}var w=require("js/component/share"),p=require("js/component/util"),h=require("js/tools/client"),m=require("js/tools/date"),f=h.getUid()||"";$AvailableBalance=$(".AvailableBalance"),$expectFeedBackAmt=$(".expectFeedBackAmt"),$olBtn=$('[data-type="oldParam"]'),$count=$(".msgCount"),$msgAlert=$(".order_num"),$mask=$(".loading-mask"),getEt=m.getEndDate,$more=$(".p-more"),perfPage=w.prPage,srPage=w.srPage,window.render=function(){n(f)},n(f);var x={};$(".result").delegate("[data-click]","click",function(){var t=$(this),o=t.attr("data-type");switch(o){case"balance":l();break;case"old":h.hideWarn(),localStorage.setItem("lastDate",p.getTime().join("")),h.newPage(w.olUrl("?h5_uid="+f));break;case"yd":a(t,-1);break;case"7d":a(t,-7);break;case"30d":a(t,-30);break;case"oldParam":h.hideWarn(),localStorage.setItem("lastDate",p.getTime().join("")),h.newPage(w.olUrl("?h5_uid="+f+"&"+t.attr("data-ts")));break;case"more":h.newPage(perfPage,0,2);break;case"sr":h.newPage(srPage,0,-1)}})}),define("js/component/share",function(require,t,o){var n="http://172.16.40.215:8080",a="/ol.html",c="/result.html",s="/search.html",d="/pl.html",l="/shareRecord.html",g="/queqiao/account/getOrderList",w="/queqiao/account/getUserAccountInfo",p="/queqiao/performance/getSummaryInfo",h=n+"/queqiao/log/saveClickLog",m=n+"/queqiao/log/saveBrowseLog",f=n+"/queqiao/collectionShare/clickCollectionShareUrl",x="/product/getProductInfoQQiaoShare",y="/tdj/getTaodianjinInfo",v="/queqiao/order/getNewOrderNum",A="/product/getQQiaoSolrProductList",$=n+"/product/getTopCategoryList?test=true",b=n+"/product/getQueQiaoProductList?test=true&pageNum=1&pageSize=20",P=n+"/product/getQueQiaoProductList",B=n+"/product/getQueQiaoCarouselList?test=true",k=n+"/product/getQueQiaoCategoryHot?test=true&type=2",I=n+"/product/getQueQiaoCategoryHot?test=true&type=1",Q=n+"/topic/getTopicInfoQueQiaoShare",W=n+"/topic/getTopicInfoQueQiao",j=n+"/queqiao/share/getShareList",C=n+"/queqiao/performance/getPerformanceList";o.exports={server:n,resultUrl:c,searchUrl:s,prPage:d,srPage:l,sc:f,searchCategoryApi:$,recommendApi:b,mainApi:P,carsouselApi:B,hotSearchWord:k,hotCategory:I,appActivityAPI:W,activityApi:Q,clickApi:h,browseApi:m,olUrl:function(t){return a+(t||"")},searchResultApi:function(){return n+A},olApi:function(t){return n+g+(t||"")+"&test=true"},balanceApi:function(t){return n+w+"?userId="+t+"&test=true"},yjApi:function(t,o,a){return n+p+"?beginTime="+(t||"")+"&endTime="+(o||"")+"&userId="+(a||"")+"&test=true"},pdApi:function(t){return n+x+"?productId="+t+"&test=true"},tdjApi:function(t){return n+y+"?NumIids="+t+"&test=true"},newOlApi:function(t,o){return n+v+"?userId="+t+"&lastTime="+o+"&test=true"},shareRecordApi:function(t){return j+"?test=true&userId="+t},plApi:function(t){return C+"?test=true&userId="+t}}}),define("js/component/util",function(require,t,o){function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=16*Math.random()|0,o="x"==t?r:3&r|8;return o.toString(16)})}function a(){var t=document.documentElement.clientWidth,o=document.createElement("style");o.innerHTML=".rtop{background-size:100% 100% !important;}.list_top .list_left{height:"+.36*t+"px;max-height:"+.36*t+"px;overflow:hidden;}",document.getElementsByTagName("head")[0].appendChild(o)}function c(){var t=new Date;return[t.getFullYear(),"-",t.getMonth()+1,"-",t.getDate()," ",t.getHours(),":",t.getMinutes(),":",t.getSeconds()].map(function(t){return"number"==typeof t&&10>t?"0"+t:t})}function s(){var t=new Date;return[t.getFullYear(),t.getMonth()+1,t.getDate()]}function d(t){return t.replace(/(^\s*)|(\s*$)/g,"").replace(/[\r\n]/g,"")}function l(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function g(){var u=navigator.userAgent;return u.indexOf("Android")>-1||u.indexOf("Linux")>-1}function w(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)?!0:!1}function p(t){return"string"!=typeof t?{}:(t=$.trim(t).replace(/^(\?|#|&)/,""),t?t.split("&").reduce(function(t,o){var n=o.replace(/\+/g," ").split("="),a=n[0],c=n[1];return a=decodeURIComponent(a),c=void 0===c?null:decodeURIComponent(c),t.hasOwnProperty(a)?Array.isArray(t[a])?t[a].push(c):t[a]=[t[a],c]:t[a]=c,t},{}):{})}function h(){var t=window.navigator.userAgent.toLowerCase(),o="8";return"micromessenger"==t.match(/MicroMessenger/i)?o="4":"qqbrowser"==t.match(/QQBrowser/i)||"mqqbrowser"==t.match(/MQQBrowser/i)||"qq"==t.match(/QQ/i)?o="5":"weibo"==t.match(/Weibo/i)?o="2":"alipay"==t.match(/Alipay/i)&&(o="7"),o}o.exports={urlParse:p,getChannelType:h,isWeixin:w,isIos:l,isAndroid:g,delSpace:d,getDate:s,Guid:n,getTime:c,injectCss:a}}),define("js/tools/client",function(require,t,o){function n(){try{window.common.showHideGoodsBar(1)}catch(e){window.showHideGoodsBar&&window.showHideGoodsBar(1)}}function a(){try{window.common.showHideGoodsBar(0)}catch(e){window.showHideGoodsBar&&window.showHideGoodsBar(0)}}function c(){try{window.common.hideBlackView()}catch(e){window.hideBlackView&&window.hideBlackView()}}function s(){try{window.common.showWarn()}catch(e){window.showWarn&&window.showWarn()}}function d(){try{window.common.hideWarn()}catch(e){window.hideWarn&&window.hideWarn()}}function l(t,o){try{window.common.shipOrderDetail("",t,o)}catch(e){window.shipOrderDetail&&window.shipOrderDetail(t,o)}}function g(){try{window.common.shipWallet()}catch(e){window.shipWallet&&window.shipWallet()}}function w(t){try{return window.common.getUser()}catch(e){return window.getUid&&window.getUid()}}function p(){try{window.common.gotoMain()}catch(e){window.gotoMain&&window.gotoMain()}}function h(t){try{window.common.shareInfo(t)}catch(e){window.shareInfo&&window.shareInfo(t)}}function m(t){console.log(t);try{window.shop.shopPage(t)}catch(e){window.carouselRedirect&&window.carouselRedirect(t)}}function f(t,o,n){try{window.common.newWebPage(t,o||"0",n||0)}catch(e){window.newPage&&window.newPage(t,o||"0",n)}}o.exports={share:h,gotoPage:m,getUid:w,gotoDetail:l,newPage:f,shipWallet:g,gotoMain:p,showWarn:s,hideWarn:d,hideLayer:c,hideBar:n,showBar:a}}),define("js/tools/date",function(req,t,o){function n(t,o){var n=t[0],a=t[1],c=t[2],s=0;return 1>c+o?(a--,0>=a&&(a+=12,n--),-1!=[1,3,5,7,8,10,12].indexOf(a)?s=31:-1!=[4,6,8,9,11].indexOf(a)?s=30:n%4==0&&n%100!=0||n%100==0&&n%400==0&&(s=29)||(s=28),c=s+c+o):c+=o,10>a&&(a="0"+a),10>c&&(c="0"+c),[n,a,c]}o.exports={getEndDate:n}});